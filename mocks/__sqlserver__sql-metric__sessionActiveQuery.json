{"status":200,"headers":{"server":"openresty/1.15.8.2","date":"Mon, 01 May 2023 06:28:42 GMT","content-type":"application/json","transfer-encoding":"chunked","connection":"close","vary":"Accept-Encoding","strict-transport-security":"max-age=15724800; includeSubDomains"},"data":{"metricInput":{"metricId":"session_sessionActiveQuery","metricPeriod":"REAL_TIME","databaseName":"udprodsql/db-prod","databaseType":"SQLSERVER","sessionId":1,"from":null,"to":null,"recommendationRequired":false},"metricOutput":{"result":{"queryList":[]},"recommendation":null},"metadata":{"underlyingQueries":["SELECT sessionId=s.session_id,\n       status=r.STATUS,\n       blockedBy=r.blocking_session_id,\n       waitType=r.wait_type,\n       waitResource=r.wait_resource,\n       waitTime=CONVERT(VARCHAR, DATEADD(ms, r.wait_time, 0), 8),\n       cpuTime=r.cpu_time,\n       logicalReads=r.logical_reads,\n    r.reads,\n    r.writes,\n    r.percent_complete as percentComplete,\n       elapsedTime=CONVERT(varchar, (r.total_elapsed_time / 1000 / 86400)) + 'd ' +\n                   CONVERT(VARCHAR, DATEADD(ms, r.total_elapsed_time, 0), 8),\n       queryText=CAST(('<?query --  ' + CHAR(13) + CHAR(13) + Substring(st.TEXT, (r.statement_start_offset / 2) + 1,\n                                                                        ((CASE r.statement_end_offset\n                                                                              WHEN - 1 THEN Datalength(st.TEXT)\n                                                                              ELSE r.statement_end_offset END -\n                                                                          r.statement_start_offset) / 2) + 1) +\n                       CHAR(13) + CHAR(13) + '--?>') AS XML),\n       storedProc=COALESCE(QUOTENAME(DB_NAME(st.dbid)) + N'.' + QUOTENAME(OBJECT_SCHEMA_NAME(st.objectid, st.dbid)) +\n                           N'.' + QUOTENAME(OBJECT_NAME(st.objectid, st.dbid)), ''),\n    qp.query_plan      AS 'xmlPlan',\n    r.command,\n       loginName=s.login_name,\n       hostName=s.host_name,\n       programName=s.program_name,\n       hostProcessId=s.host_process_id,\n       lastRequestEndTime=s.last_request_end_time,\n       loginTime=s.login_time,\n       openTransactionCount=r.open_transaction_count\nFROM sys.dm_exec_sessions AS s\n         INNER JOIN sys.dm_exec_requests AS r ON r.session_id = s.session_id\n         CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) AS st\n         OUTER APPLY sys.dm_exec_query_plan(r.plan_handle) AS qp\nWHERE s.session_id = :sessionIdParam\nORDER BY r.blocking_session_id"],"referenceDocumentation":[""],"description":"Active query of a session","supportsHistorical":false,"minimumRepeatInterval":""}}}
